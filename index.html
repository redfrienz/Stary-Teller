<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stary Teller</title>
    <link rel="stylesheet" href="styles.css">
    <script type="importmap">
        {
          "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.168.0/examples/jsm/"
          }
        }
    </script>
</head>
<body>
    <div id="background"></div>
    <div id="background-overlay"></div>
    <button id="homeButton" class="scrollButton">Home</button>
    <button id="startButton" class="scrollButton">Start</button>
    <button id="infoButton" class="scrollButton">Information</button>
    <button id="contactButton" class="scrollButton">Contact</button>
    <button id="backButton">Back</button>
    <button id="selectButton">Select</button>
    <div id="exoinfo"></div>
    <div id="exo1info">exo1<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>
    <div id="exo2info">exo2<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>
    <div id="exo3info">exo3<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>
    <div id="exo4info">exo4<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>
    <div id="exo5info">exo5<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>
    <div id="exo6info">exo6<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>
    <div id="exo7info">exo7<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>
    <div id="exo8info">exo8<br><br>host star : 000<br>distance from earth : 000<br>right ascension : 000<br>declination : 000</div>

    <div id="content-wrapper">
        <div id="information">
            <h2>Information Section</h2>
            <p>This is the information part of the page.</p>
        </div>

        <div id="title-screen">
            <div id="title">Stary Teller</div>
        </div>

        <div id="contact">
            <h2>Contact Section</h2>
            <p>This is the contact part of the page.</p>
        </div>

        <div id="empty-screen"></div>

        <div id="trans-screen">
            <button id="transButton">Start Exploring</button>
        </div>

        <div id="select-screen">
            <div id="threejs-container"></div>
            
        </div>
    </div>

    <script>
        function disableButtons() {
            const buttons = document.querySelectorAll('.scrollButton');
            buttons.forEach(button => button.disabled = true);
        }

        function enableButtons(screen) {
            const homeButton = document.getElementById('homeButton');
            const startButton = document.getElementById('startButton');
            const infoButton = document.getElementById('infoButton');
            const contactButton = document.getElementById('contactButton');
            
            homeButton.disabled = true;
            startButton.disabled = true;
            infoButton.disabled = true;
            contactButton.disabled = true;
            
            if (screen === 'title-screen') {
                startButton.disabled = false;
                infoButton.disabled = false;
                contactButton.disabled = false;
            } else {
                homeButton.disabled = false;
            }
        }

        const contentWrapper = document.getElementById('content-wrapper');
        contentWrapper.addEventListener('transitionend', function() {
            const currentTransform = contentWrapper.style.transform;

            if (currentTransform.includes('translateX(-100vw)') && !currentTransform.includes('translateY')) {
                enableButtons('title-screen');
            } else if (currentTransform.includes('translateX(0px)')) {
                enableButtons('information');
            } else if (currentTransform.includes('translateX(-200vw)')) {
                enableButtons('contact');
            } else if (currentTransform.includes('translateY(-100vh)')) {
                enableButtons('trans-screen');
            }
        });

        document.getElementById('homeButton').addEventListener('click', function() {
            disableButtons();
            contentWrapper.style.transform = 'translateX(-100vw)';
        });

        document.getElementById('startButton').addEventListener('click', function() {
            disableButtons();
            contentWrapper.style.transform = 'translateX(-100vw) translateY(-100vh)';
        });

        document.getElementById('infoButton').addEventListener('click', function() {
            disableButtons();
            contentWrapper.style.transform = 'translateX(0)';
        });

        document.getElementById('contactButton').addEventListener('click', function() {
            disableButtons();
            contentWrapper.style.transform = 'translateX(-200vw)';
        });

        enableButtons('title-screen');
    </script>

    <script>
        let isBrightened = false;

        document.getElementById('infoButton').addEventListener('click', function() {
            document.getElementById('content-wrapper').style.transform = 'translateX(0)';
        });

        document.getElementById('contactButton').addEventListener('click', function() {
            document.getElementById('content-wrapper').style.transform = 'translateX(-200vw)';
        });

        document.getElementById('startButton').addEventListener('click', function() {
            let brightness = 0.3;
            const intervalId = setInterval(function() {
                if (brightness >= 0.9) {
                    clearInterval(intervalId);
                    isBrightened = true;
                } else {
                    brightness += 0.01;
                    document.getElementById('background').style.filter = `brightness(${brightness})`;
                }
            }, 5);

            document.getElementById('content-wrapper').style.transform = 'translateX(-100vw) translateY(-100vh)';
        });

        document.getElementById('homeButton').addEventListener('click', function() {
            if (isBrightened) {
                let brightness = 0.9;
                const intervalId = setInterval(function() {
                    if (brightness <= 0.3) {
                        clearInterval(intervalId);
                        isBrightened = false;
                    } else {
                        brightness -= 0.01;
                        document.getElementById('background').style.filter = `brightness(${brightness})`;
                    }
                }, 5);
            }

            document.getElementById('content-wrapper').style.transform = 'translateX(-100vw)';
        });
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        
        const backButton = document.getElementById('backButton');
        const selectButton = document.getElementById('selectButton');
        const exoinfo = document.getElementById('exoinfo');
        const exo1info = document.getElementById('exo1info');
        const exo2info = document.getElementById('exo2info');
        const exo3info = document.getElementById('exo3info');
        const exo4info = document.getElementById('exo4info');
        const exo5info = document.getElementById('exo5info');
        const exo6info = document.getElementById('exo6info');
        const exo7info = document.getElementById('exo7info');
        const exo8info = document.getElementById('exo8info');

        let scene, camera, renderer, milkyway, ufoModel, milkyway2, ufoModel2;
        let ufoPosition = { x: 35, y: 5, z: -12.5 };
        let milkywayPosition = { x: 0, y: 0, z: 0 };
        let exoDot1Position = { x: 10, y: -5 * Math.sqrt(3) + 3, z: -5};
        let exoDot2Position = { x: 20, y: -10 * Math.sqrt(3) + 3, z: -10};
        let exoDot3Position = { x: -10, y: -5 * Math.sqrt(3) + 3, z: -5};
        let exoDot4Position = { x: -20, y: -10 * Math.sqrt(3) + 3, z: -10};
        let exoDot5Position = { x: -10, y: 5 * Math.sqrt(3) + 3, z: 5};
        let exoDot6Position = { x: -20, y: 10 * Math.sqrt(3) + 3, z: 10};
        let exoDot7Position = { x: 10, y: 5 * Math.sqrt(3) + 3, z: 5};
        let exoDot8Position = { x: 20, y: 10 * Math.sqrt(3) + 3, z: 10};

        let brightness_milky = 1, brightnessmulti = 0.98;

        let keysPressed = {};
        let speed = 0.04;
        let canMove = false;

        let exoDot1, exoDot1mini, exoModel1, exo1Displayed = false;
        let exoDot2, exoDot2mini, exoModel2, exo2Displayed = false;
        let exoDot3, exoDot3mini, exoModel3, exo3Displayed = false;
        let exoDot4, exoDot4mini, exoModel4, exo4Displayed = false;
        let exoDot5, exoDot5mini, exoModel5, exo5Displayed = false;
        let exoDot6, exoDot6mini, exoModel6, exo6Displayed = false;
        let exoDot7, exoDot7mini, exoModel7, exo7Displayed = false;
        let exoDot8, exoDot8mini, exoModel8, exo8Displayed = false;

        

        function initScene() {
            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
            camera.position.set(0, 35, 0);
            camera.rotation.set(-Math.PI/2, 0, 0);

            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            const container = document.getElementById('threejs-container');
            container.innerHTML = "";
            container.appendChild(renderer.domElement);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 2);
            directionalLight.position.set(0, 40, 0);
            scene.add(directionalLight);


            const loader = new THREE.TextureLoader();
            loader.load('milkyway_black.jpg', function(texture) {
                scene.background = texture;
            });


            const loaderGLTF = new GLTFLoader();

            loaderGLTF.load('./milkyway2.glb', function(gltf) {
                milkyway = gltf.scene;
                milkyway.scale.set(8, 1, 8);
                milkyway.position.set(35, 4.7, -12.5);
                scene.add(milkyway);
            });

            loaderGLTF.load('./UFO.glb', function(gltf) {
                ufoModel = gltf.scene;
                ufoModel.scale.set(0.5, 0.5, 0.5);
                ufoModel.position.set(ufoPosition.x, ufoPosition.y, ufoPosition.z);
                scene.add(ufoModel);
            });

            loaderGLTF.load('./milkyway2.glb', function(gltf) {
                milkyway2 = gltf.scene;
                milkyway2.scale.set(80, 5, 80);
                milkyway2.rotation.set(-Math.PI / 3, 0, 0);
                milkyway2.position.set(milkywayPosition.x, milkywayPosition.y, milkywayPosition.z);
                scene.add(milkyway2);
            });

            loaderGLTF.load('./UFO.glb', function(gltf) {
                ufoModel2 = gltf.scene;
                ufoModel2.scale.set(2, 2, 2);
                ufoModel2.position.set(0, 1 / 2, -1 * Math.sqrt(3) / 2);
                ufoModel2.rotation.set(-Math.PI / 3, 0, 0);
                scene.add(ufoModel2);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot1 = gltf.scene;
                exoDot1.scale.set(5, 5, 5);
                exoDot1.position.set(exoDot1Position.x, exoDot1Position.y, exoDot1Position.z);
                scene.add(exoDot1);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot2 = gltf.scene;
                exoDot2.scale.set(5, 5, 5);
                exoDot2.position.set(exoDot2Position.x, exoDot2Position.y, exoDot2Position.z);
                scene.add(exoDot2);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot3 = gltf.scene;
                exoDot3.scale.set(5, 5, 5);
                exoDot3.position.set(exoDot3Position.x, exoDot3Position.y, exoDot3Position.z);
                scene.add(exoDot3);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot4 = gltf.scene;
                exoDot4.scale.set(5, 5, 5);
                exoDot4.position.set(exoDot4Position.x, exoDot4Position.y, exoDot4Position.z);
                scene.add(exoDot4);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot5 = gltf.scene;
                exoDot5.scale.set(5, 5, 5);
                exoDot5.position.set(exoDot5Position.x, exoDot5Position.y, exoDot5Position.z);
                scene.add(exoDot5);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot6 = gltf.scene;
                exoDot6.scale.set(5, 5, 5);
                exoDot6.position.set(exoDot6Position.x, exoDot6Position.y, exoDot6Position.z);
                scene.add(exoDot6);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot7 = gltf.scene;
                exoDot7.scale.set(5, 5, 5);
                exoDot7.position.set(exoDot7Position.x, exoDot7Position.y, exoDot7Position.z);
                scene.add(exoDot7);
            });

            loaderGLTF.load('./exoDot.glb', function (gltf) {
                exoDot8 = gltf.scene;
                exoDot8.scale.set(5, 5, 5);
                exoDot8.position.set(exoDot8Position.x, exoDot8Position.y, exoDot8Position.z);
                scene.add(exoDot8);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot1mini = gltf.scene;
                exoDot1mini.scale.set(2, 0.2, 2);
                exoDot1mini.position.set(35 + 1, 5, -12.5 - 1);
                scene.add(exoDot1mini);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot2mini = gltf.scene;
                exoDot2mini.scale.set(2, 0.2, 2);
                exoDot2mini.position.set(35 + 2, 5, -12.5 - 2);
                scene.add(exoDot2mini);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot3mini = gltf.scene;
                exoDot3mini.scale.set(2, 0.2, 2);
                exoDot3mini.position.set(35 - 1, 5, -12.5 - 1);
                scene.add(exoDot3mini);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot4mini = gltf.scene;
                exoDot4mini.scale.set(2, 0.2, 2);
                exoDot4mini.position.set(35 - 2, 5, -12.5 - 2);
                scene.add(exoDot4mini);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot5mini = gltf.scene;
                exoDot5mini.scale.set(2, 0.2, 2);
                exoDot5mini.position.set(35 - 1, 5, -12.5 + 1);
                scene.add(exoDot5mini);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot6mini = gltf.scene;
                exoDot6mini.scale.set(2, 0.2, 2);
                exoDot6mini.position.set(35 - 2, 5, -12.5 + 2);
                scene.add(exoDot6mini);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot7mini = gltf.scene;
                exoDot7mini.scale.set(2, 0.2, 2);
                exoDot7mini.position.set(35 + 1, 5, -12.5 + 1);
                scene.add(exoDot7mini);
            });

            loaderGLTF.load('./exoDot.glb', function(gltf) {
                exoDot8mini = gltf.scene;
                exoDot8mini.scale.set(2, 0.2, 2);
                exoDot8mini.position.set(35 + 2, 5, -12.5 + 2);
                scene.add(exoDot8mini);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel1 = gltf.scene;
                exoModel1.scale.set(10, 10, 10);
                exoModel1.position.set(0, 10, 0);
                exoModel1.rotation.set(-Math.PI / 2, 0, 0);
                exoModel1.visible = false;
                scene.add(exoModel1);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel2 = gltf.scene;
                exoModel2.scale.set(10, 10, 10);
                exoModel2.position.set(0, 10, 0);
                exoModel2.rotation.set(-Math.PI / 2, 0, 0);
                exoModel2.visible = false;
                scene.add(exoModel2);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel3 = gltf.scene;
                exoModel3.scale.set(10, 10, 10);
                exoModel3.position.set(0, 10, 0);
                exoModel3.rotation.set(-Math.PI / 2, 0, 0);
                exoModel3.visible = false;
                scene.add(exoModel3);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel4 = gltf.scene;
                exoModel4.scale.set(10, 10, 10);
                exoModel4.position.set(0, 10, 0);
                exoModel4.rotation.set(-Math.PI / 2, 0, 0);
                exoModel4.visible = false;
                scene.add(exoModel4);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel5 = gltf.scene;
                exoModel5.scale.set(10, 10, 10);
                exoModel5.position.set(0, 10, 0);
                exoModel5.rotation.set(-Math.PI / 2, 0, 0);
                exoModel5.visible = false;
                scene.add(exoModel5);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel6 = gltf.scene;
                exoModel6.scale.set(10, 10, 10);
                exoModel6.position.set(0, 10, 0);
                exoModel6.rotation.set(-Math.PI / 2, 0, 0);
                exoModel6.visible = false;
                scene.add(exoModel6);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel7 = gltf.scene;
                exoModel7.scale.set(10, 10, 10);
                exoModel7.position.set(0, 10, 0);
                exoModel7.rotation.set(-Math.PI / 2, 0, 0);
                exoModel7.visible = false;
                scene.add(exoModel7);
            });

            loaderGLTF.load('./Moon.glb', function (gltf) {
                exoModel8 = gltf.scene;
                exoModel8.scale.set(10, 10, 10);
                exoModel8.position.set(0, 10, 0);
                exoModel8.rotation.set(-Math.PI / 2, 0, 0);
                exoModel8.visible = false;
                scene.add(exoModel8);
            });



            animate();
            startUpdatedAnimationLoop();
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        function resetCameraPosition() {
            if (camera) {
                camera.position.set(0, 35, 0);
                camera.rotation.set(-Math.PI/2, 0, 0);
            }
        }

        

        document.getElementById('transButton').addEventListener('click', function() {
            const scrollButtons = document.querySelectorAll('.scrollButton');
            scrollButtons.forEach(button => button.style.visibility = 'hidden');

            backButton.classList.remove('show');

            let brightness = 1;
            const brightnessIntervalId = setInterval(function() {
                if (brightness <= 0) {
                    clearInterval(brightnessIntervalId);
                    
                    initScene();
                    resetCameraPosition();
                    canMove = true;

                    document.getElementById('content-wrapper').style.transform = 'translateX(-200vw) translateY(-100vh)'
                    backButton.classList.add('show');

                    setTimeout(function() {
                        const restoreBrightnessIntervalId = setInterval(function() {
                            if (brightness >= 1) {
                                clearInterval(restoreBrightnessIntervalId);
                            } else {
                                brightness += 0.01;
                                document.body.style.filter = `brightness(${brightness})`;
                            }
                        }, 10);
                    }, 500);
                } else {
                    brightness -= 0.01;
                    document.body.style.filter = `brightness(${brightness})`;
                }
            }, 10);
        });


        document.getElementById('backButton').addEventListener('click', function() {
            let brightness = 1;
            const dimIntervalId = setInterval(function() {
                if (brightness <= 0) {
                    clearInterval(dimIntervalId);
                    
                    while(scene.children.length > 0){ 
                        scene.remove(scene.children[0]);
                    }
                    canMove = false;
                    exoModel1.visible = false;
                    exo1Displayed = false;
                    exoModel2.visible = false;
                    exo2Displayed = false;
                    exoModel3.visible = false;
                    exo3Displayed = false;
                    exoModel4.visible = false;
                    exo4Displayed = false;
                    exoModel5.visible = false;
                    exo5Displayed = false;
                    exoModel6.visible = false;
                    exo6Displayed = false;
                    exoModel7.visible = false;
                    exo7Displayed = false;
                    exoModel8.visible = false;
                    exo8Displayed = false;
                    brightness_milky = 1;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo1info.classList.remove('show');
                    exo2info.classList.remove('show');
                    exo3info.classList.remove('show');
                    exo4info.classList.remove('show');
                    exo5info.classList.remove('show');
                    exo6info.classList.remove('show');
                    exo7info.classList.remove('show');
                    exo8info.classList.remove('show');
                    resetCameraPosition();
                    ufoPosition = { x: 35, y: 5, z: -12.5 };
                    milkywayPosition = { x: 0, y: 0, z: 0 };
                    exoDot1Position = { x: 10, y: -5 * Math.sqrt(3) + 3, z: -5};
                    exoDot2Position = { x: 20, y: -10 * Math.sqrt(3) + 3, z: -10};
                    exoDot3Position = { x: -10, y: -5 * Math.sqrt(3) + 3, z: -5};
                    exoDot4Position = { x: -20, y: -10 * Math.sqrt(3) + 3, z: -10};
                    exoDot5Position = { x: -10, y: 5 * Math.sqrt(3) + 3, z: 5};
                    exoDot6Position = { x: -20, y: 10 * Math.sqrt(3) + 3, z: 10};
                    exoDot7Position = { x: 10, y: 5 * Math.sqrt(3) + 3, z: 5};
                    exoDot8Position = { x: 20, y: 10 * Math.sqrt(3) + 3, z: 10};

                    document.getElementById('content-wrapper').style.transform = 'translateX(-100vw) translateY(-100vh)';

                    
                    backButton.classList.remove('show');

                    setTimeout(function() {
                        const restoreBrightnessIntervalId = setInterval(function() {
                            if (brightness >= 1) {
                                clearInterval(restoreBrightnessIntervalId);
                                const scrollButtons = document.querySelectorAll('.scrollButton');
                                scrollButtons.forEach(button => button.style.visibility = 'visible');
                            } else {
                                brightness += 0.01;
                                document.body.style.filter = `brightness(${brightness})`;
                            }
                        }, 10);
                    }, 500);
                } else {
                    brightness -= 0.01;
                    document.body.style.filter = `brightness(${brightness})`;
                }
            }, 10);
        });


        window.addEventListener('resize', function() {
            if (renderer && camera) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });


        document.addEventListener('keydown', function(event) {
            keysPressed[event.key] = true;
        });

        document.addEventListener('keyup', function(event) {
            keysPressed[event.key] = false;
        });

        function updateUfoPosition() {
            if (ufoModel && canMove) {
                let xDirection = 0;
                let zDirection = 0;

                if (keysPressed['ArrowUp']) {
                    zDirection -= 1;
                }
                if (keysPressed['ArrowDown']) {
                    zDirection += 1;
                }
                if (keysPressed['ArrowLeft']) {
                    xDirection -= 1;
                }
                if (keysPressed['ArrowRight']) {
                    xDirection += 1;
                }

                if (xDirection !== 0 && zDirection !== 0) {
                    xDirection *= speed / Math.sqrt(2);
                    zDirection *= speed / Math.sqrt(2);
                } else {
                    xDirection *= speed;
                    zDirection *= speed;
                }

                ufoPosition.x += xDirection;
                ufoPosition.z += zDirection;
                milkywayPosition.x -= xDirection * 10;
                milkywayPosition.y -= zDirection * 5 * Math.sqrt(3);
                milkywayPosition.z -= zDirection * 5;
                exoDot1Position.x -= xDirection * 10;
                exoDot1Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot1Position.z -= zDirection * 5;
                exoDot2Position.x -= xDirection * 10;
                exoDot2Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot2Position.z -= zDirection * 5;
                exoDot3Position.x -= xDirection * 10;
                exoDot3Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot3Position.z -= zDirection * 5;
                exoDot4Position.x -= xDirection * 10;
                exoDot4Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot4Position.z -= zDirection * 5;
                exoDot5Position.x -= xDirection * 10;
                exoDot5Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot5Position.z -= zDirection * 5;
                exoDot6Position.x -= xDirection * 10;
                exoDot6Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot6Position.z -= zDirection * 5;
                exoDot7Position.x -= xDirection * 10;
                exoDot7Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot7Position.z -= zDirection * 5;
                exoDot8Position.x -= xDirection * 10;
                exoDot8Position.y -= zDirection * 5 * Math.sqrt(3);
                exoDot8Position.z -= zDirection * 5;



                ufoModel.position.set(ufoPosition.x, ufoPosition.y, ufoPosition.z);
                milkyway2.position.set(milkywayPosition.x, milkywayPosition.y, milkywayPosition.z);
                exoDot1.position.set(exoDot1Position.x, exoDot1Position.y, exoDot1Position.z);
                exoDot2.position.set(exoDot2Position.x, exoDot2Position.y, exoDot2Position.z);
                exoDot3.position.set(exoDot3Position.x, exoDot3Position.y, exoDot3Position.z);
                exoDot4.position.set(exoDot4Position.x, exoDot4Position.y, exoDot4Position.z);
                exoDot5.position.set(exoDot5Position.x, exoDot5Position.y, exoDot5Position.z);
                exoDot6.position.set(exoDot6Position.x, exoDot6Position.y, exoDot6Position.z);
                exoDot7.position.set(exoDot7Position.x, exoDot7Position.y, exoDot7Position.z);
                exoDot8.position.set(exoDot8Position.x, exoDot8Position.y, exoDot8Position.z);

            }
        }


        function traverseAndAdjustBrightness(objects, brightnessMultiplier) {
            objects.forEach(object => {
                object.traverse(function (child) {
                    if (child.isMesh) {
                        child.material.color.multiplyScalar(brightnessMultiplier);
                        if (child.material.emissive) {
                            child.material.emissive.multiplyScalar(brightnessMultiplier);
                        }
                    }
                });
            });
        }

        function checkDistanceAndDisplayexo1() {
            if (ufoModel2 && exoDot1) {
                const distance = ufoModel2.position.distanceTo(exoDot1.position);
                
                if (distance < 5 && !exo1Displayed && keysPressed['a']) {
                    exoModel1.visible = true;
                    exo1Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo1info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo1Displayed && keysPressed['s']) {
                    exoModel1.visible = false;
                    exo1Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo1info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }

        function checkDistanceAndDisplayexo2() {
            if (ufoModel2 && exoDot2) {
                const distance = ufoModel2.position.distanceTo(exoDot2.position);
                
                if (distance < 5 && !exo2Displayed && keysPressed['a']) {
                    exoModel2.visible = true;
                    exo2Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo2info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo2Displayed && keysPressed['s']) {
                    exoModel2.visible = false;
                    exo2Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo2info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }

        function checkDistanceAndDisplayexo3() {
            if (ufoModel2 && exoDot3) {
                const distance = ufoModel2.position.distanceTo(exoDot3.position);
                
                if (distance < 5 && !exo3Displayed && keysPressed['a']) {
                    exoModel3.visible = true;
                    exo3Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo3info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo3Displayed && keysPressed['s']) {
                    exoModel3.visible = false;
                    exo3Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo3info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }

        function checkDistanceAndDisplayexo4() {
            if (ufoModel2 && exoDot4) {
                const distance = ufoModel2.position.distanceTo(exoDot4.position);
                
                if (distance < 5 && !exo4Displayed && keysPressed['a']) {
                    exoModel4.visible = true;
                    exo4Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo4info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo4Displayed && keysPressed['s']) {
                    exoModel4.visible = false;
                    exo4Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo4info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }

        function checkDistanceAndDisplayexo5() {
            if (ufoModel2 && exoDot5) {
                const distance = ufoModel2.position.distanceTo(exoDot5.position);
                
                if (distance < 5 && !exo5Displayed && keysPressed['a']) {
                    exoModel5.visible = true;
                    exo5Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo5info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo5Displayed && keysPressed['s']) {
                    exoModel5.visible = false;
                    exo5Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo5info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }

        function checkDistanceAndDisplayexo6() {
            if (ufoModel2 && exoDot6) {
                const distance = ufoModel2.position.distanceTo(exoDot6.position);
                
                if (distance < 5 && !exo6Displayed && keysPressed['a']) {
                    exoModel6.visible = true;
                    exo6Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo6info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo6Displayed && keysPressed['s']) {
                    exoModel6.visible = false;
                    exo6Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo6info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }

        function checkDistanceAndDisplayexo7() {
            if (ufoModel2 && exoDot7) {
                const distance = ufoModel2.position.distanceTo(exoDot7.position);
                
                if (distance < 5 && !exo7Displayed && keysPressed['a']) {
                    exoModel7.visible = true;
                    exo7Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo7info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo7Displayed && keysPressed['s']) {
                    exoModel7.visible = false;
                    exo7Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo7info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }

        function checkDistanceAndDisplayexo8() {
            if (ufoModel2 && exoDot8) {
                const distance = ufoModel2.position.distanceTo(exoDot8.position);
                
                if (distance < 5 && !exo8Displayed && keysPressed['a']) {
                    exoModel8.visible = true;
                    exo8Displayed = true;
                    canMove = false;
                    selectButton.classList.add('show');
                    exoinfo.classList.add('show');
                    exo8info.classList.add('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky <= 0.3) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky -= 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                brightnessmulti
                            );
                        }
                    }, 5);
                } else if (distance < 5 && exo8Displayed && keysPressed['s']) {
                    exoModel8.visible = false;
                    exo8Displayed = false;
                    canMove = true;
                    selectButton.classList.remove('show');
                    exoinfo.classList.remove('show');
                    exo8info.classList.remove('show');

                    const dimIntervalId = setInterval(function () {
                        if (brightness_milky >= 1) {
                            clearInterval(dimIntervalId);
                        } else {
                            brightness_milky += 0.01;

                            traverseAndAdjustBrightness(
                                [
                                    milkyway, milkyway2, exoDot1, exoDot2, exoDot3, exoDot4, exoDot5,
                                    exoDot6, exoDot7, exoDot8, exoDot1mini, exoDot2mini, exoDot3mini,
                                    exoDot4mini, exoDot5mini, exoDot6mini, exoDot7mini, exoDot8mini
                                ],
                                1/brightnessmulti
                            );
                        }
                    }, 5);
                }
            }
        }


        selectButton.addEventListener('click', function() {
            if (exo1Displayed) {
                window.location.href = 'skyview/exo1.html';
            }
            if (exo2Displayed) {
                window.location.href = 'skyview/exo2.html';
            }
            if (exo3Displayed) {
                window.location.href = 'skyview/exo3.html';
            }
            if (exo4Displayed) {
                window.location.href = 'skyview/exo4.html';
            }
            if (exo5Displayed) {
                window.location.href = 'skyview/exo5.html';
            }
            if (exo6Displayed) {
                window.location.href = 'skyview/exo6.html';
            }
            if (exo7Displayed) {
                window.location.href = 'skyview/exo7.html';
            }
            if (exo8Displayed) {
                window.location.href = 'skyview/exo8.html';
            }
        });

        function rotateexo1() {
            if (exoModel1 && exo1Displayed) {
                exoModel1.rotation.y += 0.01;
            }
        }

        function rotateexo2() {
            if (exoModel2 && exo2Displayed) {
                exoModel2.rotation.y += 0.01;
            }
        }

        function rotateexo3() {
            if (exoModel3 && exo3Displayed) {
                exoModel3.rotation.y += 0.01;
            }
        }

        function rotateexo4() {
            if (exoModel4 && exo4Displayed) {
                exoModel4.rotation.y += 0.01;
            }
        }

        function rotateexo5() {
            if (exoModel5 && exo5Displayed) {
                exoModel5.rotation.y += 0.01;
            }
        }

        function rotateexo6() {
            if (exoModel6 && exo6Displayed) {
                exoModel6.rotation.y += 0.01;
            }
        }

        function rotateexo7() {
            if (exoModel7 && exo7Displayed) {
                exoModel7.rotation.y += 0.01;
            }
        }

        function rotateexo8() {
            if (exoModel8 && exo8Displayed) {
                exoModel8.rotation.y += 0.01;
            }
        }



        function startUpdatedAnimationLoop() {
            if (renderer && scene && camera) {
                updatedRunAnimation();
            } else {
                setTimeout(startUpdatedAnimationLoop, 100);
            }
        }

        function updatedRunAnimation() {
            requestAnimationFrame(updatedRunAnimation);
            updateUfoPosition();
            checkDistanceAndDisplayexo1();
            checkDistanceAndDisplayexo2();
            checkDistanceAndDisplayexo3();
            checkDistanceAndDisplayexo4();
            checkDistanceAndDisplayexo5();
            checkDistanceAndDisplayexo6();
            checkDistanceAndDisplayexo7();
            checkDistanceAndDisplayexo8();
            rotateexo1();
            rotateexo2();
            rotateexo3();
            rotateexo4();
            rotateexo5();
            rotateexo6();
            rotateexo7();
            rotateexo8();
            if (renderer && scene && camera) {
                renderer.render(scene, camera);
            }
        }

        const contentWrapper2 = document.getElementById('content-wrapper');
        contentWrapper2.addEventListener('transitionend', function() {
            const currentTransform = contentWrapper2.style.transform;

            if (currentTransform.includes('translateX(-200vw)') && currentTransform.includes('translateY(-100vh)')) {
                document.getElementById('backButton').classList.add('show');
            }

            if (!currentTransform.includes('translateX(-200vw)') && !currentTransform.includes('translateY(-100vh)')) {
                const scrollButtons = document.querySelectorAll('.scrollButton');
                scrollButtons.forEach(button => button.style.visibility = 'visible');
            }
        });


    </script>
</body>
</html>
